# DREAM Explorer

A data exploration tool to visualize the Electronic Health Records (EHR) of each patient who went through the COVID tests provided by the [DREAM Challenge](http://dreamchallenges.org) dataset.  

![explorer screencast](images/animated.gif)

#### How to use the tools to do health data visualization
1. load all CSVs in the dataset (downloaded from DREAM challenge site), build and save the featuretools EntitySet with feature_engineering.py
```
feature_engineering.py -i release_07-06-2020/training -e train -o
 train.parquet -d -n 4
Done Loading raw data csv files as Dask DataFrames ...
â ‡ Bulding EntitySet ... 2020-07-26 21:26:51,682 featuretools.entityset - WARNING    index visit_occurrence_id not found in dataframe, creating new integer column
Done Bulding EntitySet ...
Done Saving EntitySet train to parquet files at train.parquet ...
```
2. launch the explorer
```
dream_explorer.py -d data_dictionary.csv -e train.parquet
Dash is running on http://0.0.0.0:8050/

 Warning: This is a development server. Do not use app.run_server
 in production, use a production WSGI server like gunicorn instead.

 * Serving Flask app "dream_explorer" (lazy loading)
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: off
 * Running on http://0.0.0.0:8050/ (Press CTRL+C to quit)
```

#### How to use the tools to automatically generate feature matrix based on DREAM dataset for machine learning training
```
feature_engineering.py -p eval.dask.parquet -m test_fm -d -n 12
```

#### Appendix
Full function of feature_engineering.py
```
This is a data processing and feature enginering tool for the DREAM-COVID challenge dataset

optional arguments:
  -h, --help            show this help message and exit
  -i INPUT_DIR, --input_dir INPUT_DIR
                        where the competition dataset CSV files are stored
  -e ENTITYSET_ID, --entityset_id ENTITYSET_ID
                        the featuretools EntitySet id to save
  -o OUTPUT_ENTITYSET, --output_entityset OUTPUT_ENTITYSET
                        the path to save the newly generated EntitySet files
  -f FEATURE_PATH, --feature_path FEATURE_PATH
                        the path to save the engineered feature files and one-hot encoded feature matrix file
  -d, --dask            use Dask to process the DataFrames
  --no-dask
  -n N_WORKERS, --n_workers N_WORKERS
                        the number of Dask workers (processes) to launch
  -t THREADS_PER_WORKER, --threads_per_worker THREADS_PER_WORKER
                        the number of threads per Dask worker
```

Full function of dream_explorer.py
```
dream_explorer.py -h
usage: dream_explorer.py [-h] [-d DATADICT] [-e ENTITYSET]

This is a patient history explorer for DREAM-COVID challenge dataset

optional arguments:
  -h, --help            show this help message and exit
  -d DATADICT, --datadict DATADICT
                        the path to the data_dictionary.csv
  -e ENTITYSET, --entityset ENTITYSET
                        the path to the EntitySet files generated by feature_engineering.py
```
